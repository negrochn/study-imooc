# 搭建开发环境

**面向对象**

- 搭建开发环境
- 什么是面向对象
- UML 类图
- 总结



**搭建开发环境**

- 初始化 npm 环境
- 安装 webpack
- 安装 webpack-dev-server
- 安装 Babel

执行 `npm init -y` 初始化 npm 环境。

执行 `npm i webpack webpack-cli -D` 安装 webpack 。

创建 src/index.js 。

```js
console.log('src/index.js')
```

创建 build/webpack.dev.js 。

```js
const path = require('path')

module.exports = {
  mode: 'development',
  entry: path.join(__dirname, '..', 'src', 'index.js'),
  output: {
    path: path.join(__dirname, '..', 'dist'),
    filename: 'bundle.js'
  }
}
```

修改 package.json 的 scripts ，增加 `webpack --config build/webpack.dev.js` 。

```json
{
  "scripts": {
    "dev": "webpack --config build/webpack.dev.js"
  },
  "devDependencies": {
    "webpack": "^4.44.1",
    "webpack-cli": "^3.3.12"
  }
}
```

执行 `npm run dev` ，发现打包出 dist/bundle.js 。



执行 `npm i webpack-dev-server html-webpack-plugin -D` ，安装 webpack-dev-server 和 html-webpack-plugin 。

创建 src/index.html 。

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Javascript设计模式系统讲解与应用</title>
</head>
<body>
  <p>面向对象</p>
</body>
</html>
```

修改 build/webpack.dev.js ，引入 HtmlWebpackPlugin 插件并设置 devServer 。

```js
const HtmlWebpackPlugin = require('html-webpack-plugin')

module.exports = {
  devServer: {
    contentBase: path.join(__dirname, '..', 'dist'),
    port: 8000,
    open: true
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: path.join(__dirname, '..', 'src', 'index.html')
    })
  ]
}
```

修改 package.json ，使用 webpack-dev-server 代替 webpack 。

```json
{
  "scripts": {
    "dev": "webpack-dev-server --config build/webpack.dev.js"
  },
}

```

执行 `npm run dev` ，自动打开浏览器页签，访问 http://localhost:8000/ 。



执行 `npm i @babel/core @babel/preset-env babel-loader -D` 安装 Babel。

配置 .babelrc 。

```json
{
  "presets": ["@babel/preset-env"],
  "plugins": []
}
```

修改 webpack.dev.js ，增加 module.rules 。

```js
module.exports = {
  mode: 'development',
  module: {
    rules: [
      {
        test: /\.js$/,
        loader: ['babel-loader'],
        exclude: /node_modules/
      }
    ]
  },
}
```

修改 src/index.js 。

```js
class Person {
  constructor(name) {
    this.name = name
  }
  getName() {
    return this.name
  }
}

const p = new Person('negrochn')
console.log(p.getName())
```

执行 `npm run dev` ，自动打开浏览器页签，访问 http://localhost:8000/ ，在控制面板看到输出结果。

