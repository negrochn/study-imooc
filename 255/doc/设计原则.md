# 设计原则

**SOLID 五大设计原则**

- S - 单一职责原则
- O - 开放封闭原则
- L - 李氏置换原则
- I - 接口独立原则
- D - 依赖倒置原则



**S - 单一职责原则**

- 一个程序只做好一件事
- 如果功能过于复杂就拆分开，每个部分保持独立



**O - 开放封闭原则**

- 对扩展开放，对修改封闭
- 增加需求时，扩展新代码，而非修改已有代码
- 这是软件设计的终极目标



**L - 李氏置换原则**

- 子类能覆盖父类
- 父类能出现的地方子类就能出现
- JS 中使用较少（弱类型 & 继承使用较少）



**I - 接口独立原则**

- 保持接口的单一独立，避免出现“胖接口”
- JS 中没有接口（ TS 例外），使用较少
- 类似于单一职责原则，这里更关注接口



**D - 依赖倒置原则**

- 面向接口编程，依赖于抽象而不依赖于具体
- 使用方只关注接口而不关注具体类的实现
- JS 中使用较少（没有接口 & 弱类型）



**设计原则总结**

- SO 体现较多，详细介绍
- LID 体现较少，但是要了解其用意



**用 Promise 来说明 SO**

- 单一职责原则，每个 then 中的逻辑只做好一件事
- 开放封闭原则，如果新增需求，扩展 then
- 对扩展开放，对修改封闭

```js
function loadImg(src) {
  return new Promise((resolve, reject) => {
    const img = document.createElement('img')
    img.onload = function() {
      resolve(img)
    }
    img.onerror = function() {
      reject('图片加载失败')
    }
    img.src = src
  })
}

const url = 'https://img.mukewang.com/szimg/5bc16811000192b219201080.jpg'
const result = loadImg(url)

result.then(img => {
  console.log(img.width)
  return img
}).then(img => {
  console.log(img.height)
  return img
}).catch(err => {
  console.error(err)
})
```

